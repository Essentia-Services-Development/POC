!function(n){function a(s){var e,r,t,o,a=n(s),i=a.find("input[type=password]");if(i.length)return e=i.eq(0).attr("name")||"",r=peepso.observer.applyFilters("profile_field_save",i.val(),i),"pass1"===e?e="password":"pass2"===e&&(e="password2"),0<=["password","password2"].indexOf(e)&&(t=peepsodata.ajaxurl_legacy+"profilefieldsajax.validate_register",(o={}).name=e,o[e]=r,"password2"===e&&(i=i.closest("form").find("[name=pass1]"),o.password=i.val())),n.ajax({url:t,type:"post",dataType:"json",data:o}).done(function(s){var e,r=a.find(".ps-form__error");s.errors&&s.errors.length?(r.empty(),e=s.errors,_.each(e,function(s){r.append('<div class="ps-form__error-item">'+s+"</div>")}),r.show()):r.hide()})}n("#recoverpasswordform").on("input","input[type=password]",_.debounce(function(s){a(n(s.target).closest(".ps-form__field"))},500)).on("submit.ps-resetpassword",function(s){var e,r,t,o;return s.preventDefault(),s.stopPropagation(),e=n(this),r=e.find(".ps-form__field"),t=e.find("button[type=submit]"),o=[],errors=[],e.data("ps-submitting")||(e.data("ps-submitting",!0),r.each(function(){var s=a(this);s&&o.push(s)}),t.find("img").show(),n.when.apply(n,o).done(function(){var s;for(s in t.find("img").hide(),arguments)if(arguments[s][0].errors)return void e.removeData("ps-submitting");e.off("submit.ps-resetpassword"),setTimeout(function(){t.click()},100)})),!1})}(jQuery);