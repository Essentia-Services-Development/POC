mailster=function(e,r,n,i){"use strict";var t,s=false,a,o;e.$.document.on("click","#filter, .mailster-condition-render-group",function(){e.util.tb_show(e.l10n.subscribers.filters,"#TB_inline?x=1&width=720&height=520&inlineId=mailster-subscriber-conditions",null);return false}).on("click","#apply-filter",function(){var r=e.conditions.serialize();var i=new URLSearchParams(n.location.search);var t=Object.fromEntries(i.entries());var s=l(t,"conditions");var a=Object.keys(s).map(function(e){return e+"="+s[e]}).join("&");if(i.toString()!=a+"&"+r){n.location.search=a+"&"+r}tb_remove()}).on("click","#close-filter",tb_remove).on("change","#cb-select-all-1, #cb-select-all-2",function(){var e=r("#all_subscribers"),n=e.data("label"),i=r(".subscriber_cb");a=e.data("count");o=i.length;if(r(this).is(":checked")&&a>r("#the-list").find("tr").length&&confirm(n)){i.prop("disabled",true);e.val(1)}else{e.val(0);i.prop("disabled",false)}}).on("submit","#subscribers-overview-form",function(i){var a=r(this),o=r("#all_subscribers");if(1==o.val()){i.preventDefault();if(s)return;s=true;n.onbeforeunload=function(){return e.l10n.subscribers.onbeforeunload};t=r('<div class="alignright bulk-update-info spinner">'+e.l10n.subscribers.initprogess+"</div>").prependTo(".bulkactions");u(a.serialize(),0,function(){t.removeClass("spinner");n.onbeforeunload=null;setTimeout(function(){location.reload()},1e3)})}});function l(e,r){var n={};for(var i in e){if(i.indexOf(r)==-1){n[i]=e[i]}}return n}function c(e,r){r=r.split("?");var n=r.length==1?"":r[1];n=n.replace(new RegExp("&?"+e+"\\[\\d*\\]=[\\w]+","g"),"");n=n.replace(new RegExp("&?"+e+"=[\\w]+","g"),"");n=n.replace(/^&/,"");return r[0]+(n.length?"?"+n:"")}function u(n,i,s){if(!i)i=0;r.post(location.href,{all_subscribers:true,post_data:n,page:i,per_page:o,count:a},function(r){t.html(r.data.message);if(r.success_message)e.log(r.success_message);if(r.data.error_message)e.log(r.data.error_message,"error");if(!r.data.finished){setTimeout(function(){u(n,r.data.page,s)},r.data.delay?r.data.delay:300)}else{s&&s()}})}return e}(mailster||{},jQuery,window,document);